ğŸ“˜ Documentation â€“ MÃ©thodologie de PrÃ©diction et dâ€™Ã‰valuation des Dysfonctionnements des Ã‰quipements
ğŸ§­ Introduction
Ce document explique, de maniÃ¨re pÃ©dagogique, le fonctionnement de l'algorithme de prÃ©diction de dysfonctionnements utilisÃ© dans lâ€™application Streamlit dÃ©veloppÃ©e pour UMS PASTA.
Il dÃ©crit notamment :
â€¢	comment sont calculÃ©es les probabilitÃ©s prÃ©dites,
â€¢	comment sont obtenues les probabilitÃ©s empiriques observÃ©es,
â€¢	et pourquoi la comparaison entre les deux est essentielle pour Ã©valuer les performances des modÃ¨les.
________________________________________
1. ğŸ§  ProbabilitÃ© Empirique ObservÃ©e
â“ DÃ©finition :
Il sâ€™agit de la probabilitÃ© rÃ©elle quâ€™un Ã©quipement tombe en panne, calculÃ©e Ã  partir des donnÃ©es des 6 derniers mois (câ€™est-Ã -dire aprÃ¨s la phase d'entraÃ®nement des modÃ¨les).
ğŸ” Ã‰tapes de calcul :
âœ… Ã‰tape 1 : Regroupement par "bins"
Les Ã©quipements sont classÃ©s dans des groupes (appelÃ©s bins) selon deux critÃ¨res :
â€¢	Leur rÃ©currence de pannes (Recurrence)
â€¢	Leur temps dâ€™arrÃªt total (Total_Time)
Exemple de code :
agg_derniers["Recurrence_Bin"] = pd.cut(agg_derniers["Recurrence"], bins=5)
agg_derniers["Total_Time_Bin"] = pd.cut(agg_derniers["Total_Time"], bins=5)
________________________________________


âœ… Ã‰tape 2 : Calcul de la probabilitÃ© moyenne observÃ©e
Dans chaque groupe formÃ©, on calcule la proportion rÃ©elle dâ€™Ã©quipements qui ont subi un dysfonctionnement (Dysfunction = 1).
Exemple :
â€¢	Un bin contient 10 Ã©quipements
â€¢	4 dâ€™entre eux ont eu un Dysfunction = 1
ğŸ‘‰ ProbabilitÃ© observÃ©e = 4 / 10 = 0.4
Code :
observed_probs = agg_derniers.groupby(
    ["Recurrence_Bin", "Total_Time_Bin"]
)["Dysfunction"].mean()
________________________________________
âœ… Ã‰tape 3 : Attribution Ã  chaque Ã©quipement
Chaque Ã©quipement se voit attribuer la probabilitÃ© moyenne de son bin, selon sa rÃ©currence et son temps d'arrÃªt. Cela donne la probabilitÃ© empirique observÃ©e pour cet Ã©quipement.
________________________________________
2. ğŸ¤– ProbabilitÃ© PrÃ©dite par les ModÃ¨les
Les prÃ©dictions sont gÃ©nÃ©rÃ©es Ã  lâ€™aide de modÃ¨les de machine learning entraÃ®nÃ©s sur les 6 premiers mois de donnÃ©es.
ğŸ”§ Ã‰tapes dÃ©taillÃ©es :
âœ… Ã‰tape 1 : Construction des variables
Pour chaque Ã©quipement :
â€¢	Recurrence = nombre de pannes
â€¢	Total_Time = temps total d'arrÃªt
â€¢	Dysfunction = 1 si la rÃ©currence dÃ©passe un seuil (ex : 3), sinon 0

âœ… Ã‰tape 2 : EntraÃ®nement des modÃ¨les
Trois modÃ¨les sont utilisÃ©s :
â€¢	RÃ©gression Logistique
â€¢	ForÃªt AlÃ©atoire (Random Forest)
â€¢	Gradient Boosting
Ces modÃ¨les apprennent Ã  prÃ©dire la probabilitÃ© quâ€™un Ã©quipement ait Dysfunction = 1 en fonction de Recurrence et Total_Time.
âœ… Ã‰tape 3 : GÃ©nÃ©ration des probabilitÃ©s
Chaque modÃ¨le produit une probabilitÃ© entre 0 et 1 reprÃ©sentant le risque estimÃ© de dysfonctionnement.
Exemple :
Ã‰quipement	Logistic Regression	Random Forest
Moteur A	0.82	0.74
Convoyeur B	0.25	0.40
Pression C	0.65	0.62
________________________________________
3. ğŸ¯ Comparaison : Ã‰carts entre PrÃ©dictions et RÃ©alitÃ©
ğŸ§® Formule :
Ã‰cart = ProbabilitÃ© observÃ©e - ProbabilitÃ© prÃ©dite
â€¢	Si lâ€™Ã©cart est proche de 0, le modÃ¨le prÃ©dit bien.
â€¢	Si lâ€™Ã©cart est nÃ©gatif, le modÃ¨le surestime le risque.
â€¢	Si lâ€™Ã©cart est positif, le modÃ¨le sous-estime le risque.
________________________________________



4. ğŸ§ª Exemple Complet avec 3 Ã‰quipements
âœ… 6 premiers mois (entraÃ®nement) :
Ã‰quipement	RÃ©currence	Temps_total	Cible (Dysfunction)
Moteur A	5	240	1
Convoyeur B	2	60	0
Pression C	4	130	1
________________________________________
ğŸ¤– PrÃ©dictions des modÃ¨les :
Ã‰quipement	Logistic Regression	Random Forest
Moteur A	0.82	0.74
Convoyeur B	0.25	0.40
Pression C	0.65	0.62
________________________________________
âœ… 6 derniers mois (observations rÃ©elles) :
Ã‰quipement	RÃ©currence	Temps_total	RÃ©alitÃ© (Dysfunction)
Moteur A	3	150	1
Convoyeur B	1	30	0
Pression C	2	70	0
________________________________________
ğŸ¯ ProbabilitÃ©s ObservÃ©es (par bin) :
Ã‰quipement	ProbabilitÃ© ObservÃ©e
Moteur A	0.50
Convoyeur B	0.00
Pression C	0.00
________________________________________
ğŸ“‰ Ã‰carts (observÃ© - prÃ©dit) :
Ã‰quipement	ModÃ¨le	PrÃ©dit	ObservÃ©	Ã‰cart
Moteur A	Logistic Regression	0.82	0.50	-0.32
Convoyeur B	Logistic Regression	0.25	0.00	-0.25
Pression C	Logistic Regression	0.65	0.00	-0.65
________________________________________
5. ğŸ“Š Visualisation des RÃ©sultats
Les Ã©carts sont reprÃ©sentÃ©s dans lâ€™application avec :
â€¢	ğŸ“‰ Graphique en barres (Altair) : Ã‰cart absolu par Ã©quipement et modÃ¨le
â€¢	ğŸ“ˆ Courbe interactive : Ã©volution des Ã©carts par modÃ¨le
Ces visualisations permettent :
â€¢	dâ€™Ã©valuer la performance des modÃ¨les,
â€¢	dâ€™identifier les Ã©quipements Ã  risque mal prÃ©dits,
â€¢	dâ€™ajuster le modÃ¨le ou le seuil si besoin.
________________________________________
ğŸ§¾ Conclusion
Ce processus permet dâ€™assurer une prÃ©diction fiable des pannes en :
â€¢	exploitant les donnÃ©es historiques (6 mois),
â€¢	construisant des modÃ¨les prÃ©dictifs robustes,
â€¢	les comparant aux rÃ©sultats rÃ©els du futur proche (6 mois suivants).
Lâ€™Ã©cart entre prÃ©diction et rÃ©alitÃ© est un indicateur essentiel pour amÃ©liorer la maintenance prÃ©ventive et optimiser les interventions sur les Ã©quipements de production.
________________________________________

